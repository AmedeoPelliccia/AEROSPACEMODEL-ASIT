# ASIGT Execution Runs

## Overview

This directory contains **immutable execution history** for all ASIGT transformation runs. Each run is stored in a timestamped subdirectory that cannot be modified after creation, ensuring complete auditability and traceability.

## Directory Structure

```
runs/
├── README.md                           # This file
├── .gitkeep                            # Preserves directory in git
│
└── YYYYMMDD-HHMM__<contract-id>/       # Individual run directory
    ├── INPUT_MANIFEST.json             # Input sources and hashes
    ├── OUTPUT_MANIFEST.json            # Generated outputs and hashes
    ├── TRACE_MATRIX.csv                # Source-to-target traceability
    ├── VALIDATION_REPORT.json          # BREX/schema validation results
    ├── METRICS.json                    # Execution metrics and statistics
    └── LOG.txt                         # Detailed execution log
```

## Naming Convention

Run directories follow the pattern:

```
YYYYMMDD-HHMM__<contract-id>
```

| Component | Description | Example |
|-----------|-------------|---------|
| `YYYYMMDD` | Execution date | `20260122` |
| `HHMM` | Execution time (24h) | `1430` |
| `__` | Separator | `__` |
| `<contract-id>` | ASIT contract identifier | `KITDM-CTR-LM-CSDB_ATA28` |

**Example:** `20260122-1430__KITDM-CTR-LM-CSDB_ATA28`

## Run Artifacts

### INPUT_MANIFEST.json

Records all input sources used in the transformation.

```json
{
  "run_id": "20260122-1430__KITDM-CTR-LM-CSDB_ATA28",
  "contract_id": "KITDM-CTR-LM-CSDB_ATA28",
  "baseline_ref": "FBL-2026-Q1-003",
  "execution_start": "2026-01-22T14:30:00Z",
  "asit_version": "2.0.0",
  "asigt_version": "2.0.0",
  "inputs": [
    {
      "source_id": "REQ-28-001",
      "source_type": "requirement",
      "source_path": "KDB/SSOT/requirements/ATA28/fuel_system.yaml",
      "baseline": "FBL-2026-Q1-003",
      "hash_algorithm": "sha256",
      "hash": "a1b2c3d4e5f6...",
      "retrieved_at": "2026-01-22T14:30:01Z"
    }
  ],
  "total_inputs": 47,
  "input_hash": "sha256:combined_input_hash..."
}
```

### OUTPUT_MANIFEST.json

Records all outputs generated by the transformation.

```json
{
  "run_id": "20260122-1430__KITDM-CTR-LM-CSDB_ATA28",
  "execution_end": "2026-01-22T14:45:23Z",
  "status": "SUCCESS",
  "outputs": [
    {
      "output_id": "DMC-HJONE-A-28-10-00-00A-040A-D",
      "output_type": "dm_descriptive",
      "output_path": "IDB/CSDB/DM/DMC-HJONE-A-28-10-00-00A-040A-D.xml",
      "info_code": "040",
      "tech_name": "Fuel System",
      "hash_algorithm": "sha256",
      "hash": "e5f6g7h8i9j0...",
      "file_size_bytes": 15234,
      "generated_at": "2026-01-22T14:35:12Z"
    }
  ],
  "total_outputs": 23,
  "output_hash": "sha256:combined_output_hash...",
  "publications": {
    "dm_count": 18,
    "pm_count": 2,
    "dml_count": 1,
    "icn_count": 12
  }
}
```

### TRACE_MATRIX.csv

Links every output element to its source(s).

```csv
trace_id,source_id,source_type,source_hash,target_id,target_type,target_hash,link_type,timestamp
TRACE-000001,REQ-28-001,requirement,a1b2c3d4,DMC-HJONE-A-28-10-00-00A-040A-D,dm_descriptive,e5f6g7h8,derives_from,2026-01-22T14:35:12Z
TRACE-000002,TASK-28-10-001,task,b2c3d4e5,DMC-HJONE-A-28-10-00-01A-510A-D,dm_procedural,f6g7h8i9,implements,2026-01-22T14:36:45Z
TRACE-000003,PART-28-10-001,parts_bom,c3d4e5f6,DMC-HJONE-A-28-10-00-01A-941A-D,dm_ipd,g7h8i9j0,derived_from,2026-01-22T14:38:22Z
```

### VALIDATION_REPORT.json

Results of BREX and schema validation.

```json
{
  "run_id": "20260122-1430__KITDM-CTR-LM-CSDB_ATA28",
  "validation_timestamp": "2026-01-22T14:44:00Z",
  "overall_status": "PASS",
  "brex_validation": {
    "brex_file": "S1000D_5.0_DEFAULT.yaml",
    "profile": "default",
    "total_rules_checked": 42,
    "passed": 42,
    "failed": 0,
    "warnings": 3,
    "results": [
      {
        "rule_id": "BREX-ID-001",
        "rule_name": "DMC Format Validation",
        "status": "PASS",
        "checked_count": 18,
        "details": []
      }
    ]
  },
  "schema_validation": {
    "schema_version": "S1000D Issue 5.0",
    "total_validated": 23,
    "valid": 23,
    "invalid": 0,
    "results": []
  },
  "trace_validation": {
    "total_traces": 156,
    "complete": 156,
    "orphaned_outputs": 0,
    "missing_sources": 0
  }
}
```

### METRICS.json

Execution statistics and performance metrics.

```json
{
  "run_id": "20260122-1430__KITDM-CTR-LM-CSDB_ATA28",
  "execution": {
    "start_time": "2026-01-22T14:30:00Z",
    "end_time": "2026-01-22T14:45:23Z",
    "duration_seconds": 923,
    "status": "SUCCESS"
  },
  "processing": {
    "inputs_processed": 47,
    "outputs_generated": 23,
    "traces_created": 156,
    "validations_performed": 65
  },
  "performance": {
    "avg_dm_generation_ms": 245,
    "avg_validation_ms": 89,
    "peak_memory_mb": 512,
    "cpu_time_seconds": 456
  },
  "artifacts": {
    "dm_descriptive": 8,
    "dm_procedural": 6,
    "dm_fault_isolation": 2,
    "dm_ipd": 2,
    "pm": 2,
    "dml": 1,
    "icn": 12
  },
  "size": {
    "total_input_bytes": 1048576,
    "total_output_bytes": 2097152,
    "compression_ratio": 0.65
  }
}
```

### LOG.txt

Detailed execution log with timestamps.

```
================================================================================
ASIGT EXECUTION LOG
================================================================================
Run ID:      20260122-1430__KITDM-CTR-LM-CSDB_ATA28
Contract:    KITDM-CTR-LM-CSDB_ATA28
Baseline:    FBL-2026-Q1-003
Started:     2026-01-22T14:30:00Z
================================================================================

[2026-01-22T14:30:00Z] INFO  Starting ASIGT execution
[2026-01-22T14:30:00Z] INFO  Loading contract: KITDM-CTR-LM-CSDB_ATA28
[2026-01-22T14:30:01Z] INFO  Contract validated successfully
[2026-01-22T14:30:01Z] INFO  Loading baseline: FBL-2026-Q1-003
[2026-01-22T14:30:02Z] INFO  Baseline verified, 47 source items found
[2026-01-22T14:30:02Z] INFO  Starting transformation phase
[2026-01-22T14:30:03Z] INFO  Processing requirements: 15 items
[2026-01-22T14:31:15Z] INFO  Generated 8 descriptive DMs from requirements
[2026-01-22T14:31:16Z] INFO  Processing tasks: 12 items
[2026-01-22T14:33:45Z] INFO  Generated 6 procedural DMs from tasks
[2026-01-22T14:33:46Z] INFO  Processing repairs: 5 items
[2026-01-22T14:35:22Z] INFO  Generated 2 fault isolation DMs from repairs
[2026-01-22T14:35:23Z] INFO  Processing parts: 15 items
[2026-01-22T14:38:45Z] INFO  Generated 2 IPD DMs from parts data
[2026-01-22T14:38:46Z] INFO  Generating publication modules
[2026-01-22T14:40:12Z] INFO  Generated 2 PMs
[2026-01-22T14:40:13Z] INFO  Generating DML
[2026-01-22T14:40:45Z] INFO  Generated 1 DML
[2026-01-22T14:40:46Z] INFO  Starting validation phase
[2026-01-22T14:42:00Z] INFO  BREX validation: 42/42 rules passed
[2026-01-22T14:43:30Z] INFO  Schema validation: 23/23 documents valid
[2026-01-22T14:44:00Z] INFO  Trace validation: 156 traces verified
[2026-01-22T14:44:01Z] INFO  Building output manifests
[2026-01-22T14:45:00Z] INFO  Writing run artifacts
[2026-01-22T14:45:23Z] INFO  ASIGT execution completed successfully

================================================================================
SUMMARY
================================================================================
Status:              SUCCESS
Duration:            15m 23s
Inputs Processed:    47
Outputs Generated:   23
Traces Created:      156
Validation Status:   PASS
================================================================================
```

## Immutability Rules

1. **No Modification** — Run directories are write-once; contents cannot be changed after creation
2. **No Deletion** — Run directories should never be deleted (archive to cold storage if needed)
3. **Integrity Verification** — Hashes in manifests can be used to verify artifact integrity
4. **Append-Only** — New runs create new directories; existing runs are never updated

## Retention Policy

| Category | Retention Period | Storage Tier |
|----------|------------------|--------------|
| Active Runs | 90 days | Hot storage |
| Archived Runs | 7 years | Cold storage |
| Certification Evidence | Permanent | Archive |

## Usage

### Querying Runs

```bash
# List all runs
aerospacemodel runs list

# List runs for specific contract
aerospacemodel runs list --contract KITDM-CTR-LM-CSDB_ATA28

# Show run details
aerospacemodel runs show 20260122-1430__KITDM-CTR-LM-CSDB_ATA28

# Verify run integrity
aerospacemodel runs verify 20260122-1430__KITDM-CTR-LM-CSDB_ATA28
```

### Exporting Runs

```bash
# Export run as ZIP archive
aerospacemodel runs export 20260122-1430__KITDM-CTR-LM-CSDB_ATA28 --output ./export/

# Export trace matrix only
aerospacemodel runs export 20260122-1430__KITDM-CTR-LM-CSDB_ATA28 --traces-only
```

## Certification Evidence

Run artifacts serve as **certification evidence** for:

- **DO-178C**: Software traceability requirements
- **ARP4754A**: Development assurance process evidence
- **AS9100**: Quality management system records

Each run directory provides:

- Complete input-to-output traceability
- Validation evidence (BREX, schema)
- Immutable audit trail
- Reproducibility information

## Git Integration

For development environments, add to `.gitignore`:

```gitignore
# Ignore run artifacts (except .gitkeep)
ASIGT/runs/*
!ASIGT/runs/.gitkeep
!ASIGT/runs/README.md
```

For certification evidence, commit specific runs:

```bash
git add ASIGT/runs/20260122-1430__KITDM-CTR-LM-CSDB_ATA28/
git commit -m "Add certification evidence run for ATA28 CSDB"
```
