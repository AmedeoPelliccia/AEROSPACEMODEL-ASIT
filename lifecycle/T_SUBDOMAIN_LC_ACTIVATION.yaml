# =============================================================================
# T-SUBDOMAIN LIFECYCLE ACTIVATION
# AIRCRAFT TLI v2.1 Canonical - T-TECHNOLOGIES Subdomain LC Activation Rules
# Program: AMPEL360 Q100
# =============================================================================
#
# This file defines lifecycle phase activation rules for T-TECHNOLOGIES subdomains
# within the OPT-IN_FRAMEWORK. It specifies which LC phases are mandatory, optional,
# or skipped for each technology subdomain.
#
# Novel Technology Subdomains (Full LC01-LC14 activation):
#   - C2_CIRCULAR_CRYOGENIC_CELLS (LH₂ cryogenic fuel systems)
#   - P_PROPULSION (Advanced propulsion: fuel-cell, electric)
#   - I2_INTELLIGENCE (AI/ML models and synthetic data)
#
# Standard Subdomains: Use standard_profile template
# =============================================================================

meta:
  schema_version: "2.1.0"
  file_version: "1.0.0"
  program: "AMPEL360 Q100"
  owner: "ASIT"
  status: "ACTIVE"
  date: "2026-02-12"
  canonical_lc_source: "lifecycle/LC_PHASE_REGISTRY.yaml"
  policy:
    strict_package_validation: true
    allow_phase_skip: false
    require_gate_validation: true

# =============================================================================
# Lifecycle Package Definitions (from LC_PHASE_REGISTRY.yaml)
# =============================================================================

lifecycle_packages:
  LC01:
    - "KNOT_MGMT"
    - "KNU_PLANNING"
    - "GOVERNANCE"
    - "INCENTIVES"

  LC02:
    - "REQ"
    - "ICD"
    - "DATA"
    - "COMPLIANCE_INTENT"

  LC03:
    - "SAFETY"
    - "RELIABILITY"
    - "HAZARD_MGMT"

  LC04:
    - "DESIGN"
    - "CONFIG"
    - "INTERFACES"

  LC05:
    - "ANALYSIS"
    - "MODELS"
    - "VALIDATION"

  LC06:
    - "TEST"
    - "INTEGRATION"
    - "CONFORMITY"

  LC07:
    - "QA"
    - "PROCESS_COMPLIANCE"
    - "ACCEPTANCE"

  LC08:
    - "CERT_BASIS"
    - "COMPLIANCE"
    - "FLIGHT_TEST"

  LC09:
    - "ESG"
    - "LCA"
    - "ENV_COMPLIANCE"

  LC10:
    - "INDUSTRIAL"
    - "SUPPLY"
    - "QUALITY_PROD"

  LC11:
    - "CUSTOMER_DELTAS"
    - "OPS_CONFIG"
    - "RELEASE_NOTES"

  LC12:
    - "SB"
    - "REPAIR"
    - "QUERY"
    - "AOG"
    - "COC"
    - "COMPLIANCE"

  LC13:
    - "MAINTENANCE_SOURCE"
    - "REPAIR_SOURCE"
    - "OVERHAUL_SOURCE"

  LC14:
    - "DISMANTLING"
    - "MATERIAL_RECOVERY"
    - "DPP_CLOSURE"
    - "ESG_EOL"

# =============================================================================
# Baseline Rules
# =============================================================================

baseline_rules:
  FBL:
    producer_lc: "LC02"
    required_packages: ["REQ", "ICD"]

  DBL:
    producer_lc: "LC04"
    required_packages: ["DESIGN", "CONFIG", "INTERFACES"]

  PBL:
    producer_lc: "LC10"
    required_packages: ["INDUSTRIAL", "SUPPLY", "QUALITY_PROD"]

# =============================================================================
# Default Standard Profile
# =============================================================================

defaults:
  standard_profile:
    description: "Standard LC activation for conventional ATA chapters"
    mandatory_phases: ["LC01", "LC02", "LC04", "LC06", "LC08", "LC10", "LC12", "LC13"]
    optional_phases: ["LC03", "LC05", "LC07", "LC09", "LC11", "LC14"]
    skip_phases: []
    gates:
      - "G-LC02-FBL"
      - "G-LC04-DBL"
      - "G-LC06-CONFORMITY"
      - "G-LC10-PBL"

# =============================================================================
# SUBDOMAIN: C2_CIRCULAR_CRYOGENIC_CELLS
# ATA 28 – Hydrogen Cryogenic Fuel Systems
# =============================================================================

subdomains:
  C2_CIRCULAR_CRYOGENIC_CELLS:
    title: "Circular Cryogenic Cells (LH₂ Fuel Systems)"
    optin_path: "OPT-IN_FRAMEWORK/T-TECHNOLOGIES_AMEDEOPELLICCIA-ON_BOARD_SYSTEMS/C2-CIRCULAR_CRYOGENIC_CELLS"
    ata_scope: ["ATA_28-FUEL"]
    doa_criticality: "CRITICAL"
    novel_technology: true
    special_conditions:
      - "SC-28-H2-001: Hydrogen storage and distribution"
      - "SC-28-CRYO-002: Cryogenic temperature handling"

    plm:
      LC01:
        active: true
        packages: ["KNOT_MGMT", "KNU_PLANNING", "GOVERNANCE"]
        rationale: "Initial H2 system concept definition"

      LC02:
        active: true
        packages: ["REQ", "ICD", "DATA", "COMPLIANCE_INTENT"]
        baseline_out: "FBL"
        rationale: "H2 system requirements and interfaces"

      LC03:
        active: true
        packages: ["SAFETY", "RELIABILITY", "HAZARD_MGMT"]
        rationale: "Critical safety assessment for H2 systems (explosion, cryogenic hazards)"

      LC04:
        active: true
        packages: ["DESIGN", "CONFIG", "INTERFACES"]
        baseline_out: "DBL"
        rationale: "LH2 tank design, insulation, leak detection, venting"

      LC05:
        active: true
        packages: ["ANALYSIS", "MODELS", "VALIDATION"]
        rationale: "Thermal analysis, boil-off modeling, structural analysis"

      LC06:
        active: true
        packages: ["TEST", "INTEGRATION", "CONFORMITY"]
        rationale: "H2 leak testing, pressure testing, thermal cycling"

      LC07:
        active: true
        packages: ["QA", "PROCESS_COMPLIANCE", "ACCEPTANCE"]
        rationale: "H2 system quality assurance"

      LC08:
        active: true
        packages: ["CERT_BASIS", "COMPLIANCE", "FLIGHT_TEST"]
        rationale: "H2 system certification per special conditions"

      LC09:
        active: true
        packages: ["ESG", "LCA", "ENV_COMPLIANCE"]
        rationale: "H2 lifecycle environmental impact assessment"

      LC10:
        active: true
        packages: ["INDUSTRIAL", "SUPPLY", "QUALITY_PROD"]
        baseline_out: "PBL"
        rationale: "H2 system production authorization"

    ops:
      LC11:
        active: true
        packages: ["CUSTOMER_DELTAS", "OPS_CONFIG"]
        rationale: "Customer H2 fueling infrastructure integration"

      LC12:
        active: true
        packages: ["SB", "REPAIR", "QUERY", "AOG", "COC", "COMPLIANCE"]
        rationale: "H2 system maintenance and airworthiness"

      LC13:
        active: true
        packages: ["MAINTENANCE_SOURCE", "REPAIR_SOURCE"]
        rationale: "H2 system maintenance source data"

      LC14:
        active: true
        packages: ["DISMANTLING", "MATERIAL_RECOVERY", "DPP_CLOSURE"]
        rationale: "H2 tank decommissioning and material recovery"

    gates:
      - "G-LC02-FBL"
      - "G-LC04-DBL"
      - "G-LC06-CONFORMITY"
      - "G-LC08-CERT"
      - "G-LC10-PBL"

# =============================================================================
# SUBDOMAIN: P_PROPULSION
# Advanced Propulsion (Fuel Cell, Electric, Hybrid)
# =============================================================================

  P_PROPULSION:
    title: "Advanced Propulsion Systems"
    optin_path: "OPT-IN_FRAMEWORK/T-TECHNOLOGIES_AMEDEOPELLICCIA-ON_BOARD_SYSTEMS/P-PROPULSION"
    ata_scope: ["ATA_71-POWER_PLANT", "ATA_72-ENGINE", "ATA_73-ENGINE_FUEL_AND_CONTROL"]
    doa_criticality: "CRITICAL"
    novel_technology: true
    special_conditions:
      - "SC-71-FUELCELL-001: Fuel cell power plant certification"

    plm:
      LC01:
        active: true
        packages: ["KNOT_MGMT", "KNU_PLANNING", "GOVERNANCE"]
        rationale: "Fuel cell propulsion concept definition"

      LC02:
        active: true
        packages: ["REQ", "ICD", "DATA", "COMPLIANCE_INTENT"]
        baseline_out: "FBL"
        rationale: "Fuel cell system requirements and power interfaces"

      LC03:
        active: true
        packages: ["SAFETY", "RELIABILITY", "HAZARD_MGMT"]
        rationale: "Fuel cell safety assessment (thermal, electrical, H2 supply)"

      LC04:
        active: true
        packages: ["DESIGN", "CONFIG", "INTERFACES"]
        baseline_out: "DBL"
        rationale: "Fuel cell stack, BoP, thermal management design"

      LC05:
        active: true
        packages: ["ANALYSIS", "MODELS", "VALIDATION"]
        rationale: "Electrochemical modeling, thermal analysis, power conditioning"

      LC06:
        active: true
        packages: ["TEST", "INTEGRATION", "CONFORMITY"]
        rationale: "Fuel cell stack testing, system integration, power output validation"

      LC07:
        active: true
        packages: ["QA", "PROCESS_COMPLIANCE", "ACCEPTANCE"]
        rationale: "Fuel cell production quality assurance"

      LC08:
        active: true
        packages: ["CERT_BASIS", "COMPLIANCE", "FLIGHT_TEST"]
        rationale: "Fuel cell propulsion certification per special conditions"

      LC09:
        active: true
        packages: ["ESG", "LCA", "ENV_COMPLIANCE"]
        rationale: "Fuel cell lifecycle and zero-emission propulsion assessment"

      LC10:
        active: true
        packages: ["INDUSTRIAL", "SUPPLY", "QUALITY_PROD"]
        baseline_out: "PBL"
        rationale: "Fuel cell production authorization"

    ops:
      LC11:
        active: true
        packages: ["CUSTOMER_DELTAS", "OPS_CONFIG"]
        rationale: "Customer propulsion configuration"

      LC12:
        active: true
        packages: ["SB", "REPAIR", "QUERY", "AOG", "COC", "COMPLIANCE"]
        rationale: "Fuel cell system maintenance and stack replacement"

      LC13:
        active: true
        packages: ["MAINTENANCE_SOURCE", "REPAIR_SOURCE", "OVERHAUL_SOURCE"]
        rationale: "Fuel cell maintenance and overhaul procedures"

      LC14:
        active: true
        packages: ["DISMANTLING", "MATERIAL_RECOVERY", "DPP_CLOSURE"]
        rationale: "Fuel cell stack decommissioning and material recovery"

    gates:
      - "G-LC02-FBL"
      - "G-LC04-DBL"
      - "G-LC06-CONFORMITY"
      - "G-LC08-CERT"
      - "G-LC10-PBL"

# =============================================================================
# SUBDOMAIN: I2_INTELLIGENCE
# AI/ML Models and Synthetic Data Validation
# =============================================================================

  I2_INTELLIGENCE:
    title: "Intelligence Systems (AI/ML Models)"
    optin_path: "OPT-IN_FRAMEWORK/T-TECHNOLOGIES_AMEDEOPELLICCIA-ON_BOARD_SYSTEMS/I2-INTELLIGENCE"
    ata_scope: ["ATA_95-AI_ML_MODELS", "ATA_97-SYNTHETIC_DATA_VALIDATION"]
    doa_criticality: "VARIES"
    novel_technology: true
    special_conditions:
      - "SC-AI-ASSURANCE-001: AI model assurance and explainability"
      - "EU_AI_ACT: High-risk AI system compliance"

    plm:
      LC01:
        active: true
        packages: ["KNOT_MGMT", "KNU_PLANNING", "GOVERNANCE"]
        rationale: "AI/ML concept and ethical governance"

      LC02:
        active: true
        packages: ["REQ", "ICD", "DATA", "COMPLIANCE_INTENT"]
        baseline_out: "FBL"
        rationale: "AI/ML requirements, training data governance, model interfaces"

      LC03:
        active: true
        packages: ["SAFETY", "RELIABILITY", "HAZARD_MGMT"]
        rationale: "AI safety assessment (bias, failure modes, human oversight)"

      LC04:
        active: true
        packages: ["DESIGN", "CONFIG", "INTERFACES"]
        baseline_out: "DBL"
        rationale: "Model architecture, training pipeline, inference design"

      LC05:
        active: true
        packages: ["ANALYSIS", "MODELS", "VALIDATION"]
        rationale: "Model training, validation, performance analysis, explainability"

      LC06:
        active: true
        packages: ["TEST", "INTEGRATION", "CONFORMITY"]
        rationale: "Model testing, adversarial testing, integration validation"

      LC07:
        active: true
        packages: ["QA", "PROCESS_COMPLIANCE", "ACCEPTANCE"]
        rationale: "AI model quality assurance and ethical compliance"

      LC08:
        active: true
        packages: ["CERT_BASIS", "COMPLIANCE", "FLIGHT_TEST"]
        rationale: "AI model certification per special conditions and EU AI Act"

      LC09:
        active: true
        packages: ["ESG", "LCA", "ENV_COMPLIANCE"]
        rationale: "Optional: AI energy consumption and ethical impact assessment"

      LC10:
        active: true
        packages: ["INDUSTRIAL", "SUPPLY", "QUALITY_PROD"]
        baseline_out: "PBL"
        rationale: "AI model production deployment authorization"

    ops:
      LC11:
        active: true
        packages: ["CUSTOMER_DELTAS", "OPS_CONFIG"]
        rationale: "Customer AI model customization and configuration"

      LC12:
        active: true
        packages: ["SB", "REPAIR", "QUERY", "AOG", "COC", "COMPLIANCE"]
        rationale: "AI model monitoring, drift detection, retraining"

      LC13:
        active: true
        packages: ["MAINTENANCE_SOURCE"]
        rationale: "AI model maintenance: retraining data, model updates"

      LC14:
        active: true
        packages: ["DPP_CLOSURE"]
        rationale: "Optional: AI model decommissioning and data deletion"

    gates:
      - "G-LC02-FBL"
      - "G-LC04-DBL"
      - "G-LC06-CONFORMITY"
      - "G-LC08-CERT"
      - "G-LC10-PBL"

# =============================================================================
# SUBDOMAIN: T01_STANDARD_SUBDOMAIN_TEMPLATE
# Template for standard ATA chapters
# =============================================================================

  T01_STANDARD_SUBDOMAIN_TEMPLATE:
    title: "Standard Subdomain Template"
    optin_path: "OPT-IN_FRAMEWORK/T-TECHNOLOGIES_AMEDEOPELLICCIA-ON_BOARD_SYSTEMS/{SUBDOMAIN}"
    ata_scope: ["VARIABLE"]
    doa_criticality: "VARIES"
    novel_technology: false
    profile: "standard_profile"
    description: "Use standard_profile for conventional ATA chapters without novel technology"

# =============================================================================
# O-ORGANIZATIONS SUBDOMAINS
# =============================================================================

  O_AUTHORITATIVE:
    title: "Authoritative (A)"
    optin_path: "OPT-IN_FRAMEWORK/O-ORGANIZATIONS/A-AUTHORITATIVE"
    ata_scope: ["ATA_00-GENERAL", "ATA_04-AIRWORTHINESS_LIMITATIONS", "ATA_05-TIME_LIMITS_MAINT_CHECKS"]
    doa_criticality: "STANDARD"
    novel_technology: false
    profile: "standard_profile"
    description: "Agency, regulatory, and legal-derived requirements — airworthiness mandates and certification framework."

  O_BUSINESS_ENFORCEMENT:
    title: "Business Enforcement (B)"
    optin_path: "OPT-IN_FRAMEWORK/O-ORGANIZATIONS/B-BUSINESS_ENFORCEMENT"
    ata_scope: ["ATA_01-MAINTENANCE_POLICY", "ATA_02-OPERATIONS_ORG", "ATA_03-SUPPORT_INFORMATION"]
    doa_criticality: "STANDARD"
    novel_technology: false
    profile: "standard_profile"
    description: "Operator business policies and enforcement — maintenance programs, operations org, and support logistics."

# =============================================================================
# P-PROGRAMS SUBDOMAINS
# =============================================================================

  P_PRODUCT_DEFINITION:
    title: "Product Definition (P)"
    optin_path: "OPT-IN_FRAMEWORK/P-PROGRAMS/P-PRODUCT_DEFINITION"
    ata_scope: ["ATA_06-DIMENSIONS_AND_AREAS", "ATA_08-LEVELING_AND_WEIGHING", "ATA_11-PLACARDS_AND_MARKINGS"]
    doa_criticality: "STANDARD"
    novel_technology: false
    profile: "standard_profile"
    description: "What the product is — dimensions, weight, markings. Feeds configuration management."

  P_SERVICE_INSTRUCTION:
    title: "Service Instruction (S)"
    optin_path: "OPT-IN_FRAMEWORK/P-PROGRAMS/S-SERVICE_INSTRUCTION"
    ata_scope: ["ATA_07-LIFTING_AND_SHORING", "ATA_09-TOWING_AND_TAXIING", "ATA_10-PARKING_MOORING_STORAGE_RETURN_TO_SERVICE", "ATA_12-SERVICING"]
    doa_criticality: "STANDARD"
    novel_technology: false
    profile: "standard_profile"
    description: "How you handle it — lifting, towing, servicing. Feeds ground operations manuals."

# =============================================================================
# I-INFRASTRUCTURES SUBDOMAINS
# =============================================================================

  I_MANUFACTURING_FACILITIES:
    title: "Manufacturing Facilities (M1)"
    optin_path: "OPT-IN_FRAMEWORK/I-INFRASTRUCTURES/M1-MANUFACTURING_FACILITIES"
    ata_scope: ["ATA_85-FUEL_CELL_SYSTEMS_INFRA"]
    doa_criticality: "STANDARD"
    novel_technology: false
    profile: "standard_profile"
    description: "Factory-floor infrastructure — production lines, test rigs, assembly benches."

  I_MAINTENANCE_ENVIRONMENTS:
    title: "Maintenance Environments (M2)"
    optin_path: "OPT-IN_FRAMEWORK/I-INFRASTRUCTURES/M2-MAINTENANCE_ENVIRONMENTS"
    ata_scope: ["ATA_08-LEVELING_AND_WEIGHING_INFRA", "ATA_10-PARKING_MOORING_STORAGE_RTS_INFRA", "ATA_12-SERVICING_INFRA"]
    doa_criticality: "STANDARD"
    novel_technology: false
    profile: "standard_profile"
    description: "Maintenance ecosystem — line stations, hangars, component shops."

  I_OPERATIONS_SERVICE_STRUCTURES:
    title: "Operations & Service Structures (O)"
    optin_path: "OPT-IN_FRAMEWORK/I-INFRASTRUCTURES/O-OPERATIONS_SERVICE_STRUCTURES"
    ata_scope: ["ATA_03-SUPPORT_INFRA", "ATA_IN_H2_GSE_AND_SUPPLY_CHAIN"]
    doa_criticality: "VARIES"
    novel_technology: false
    profile: "standard_profile"
    description: "Airport and logistics infrastructure including H₂ supply chain."

# =============================================================================
# N-NEURAL_NETWORKS SUBDOMAINS
# =============================================================================

  N_DIGITAL_THREAD_TRACEABILITY:
    title: "Digital Thread & Traceability (D)"
    optin_path: "OPT-IN_FRAMEWORK/N-NEURAL_NETWORKS/D-DIGITAL_THREAD_TRACEABILITY"
    ata_scope: ["ATA_96-TRACEABILITY_DPP_LEDGER"]
    doa_criticality: "STANDARD"
    novel_technology: false
    profile: "standard_profile"
    description: "Ledger, DPP, hash chain, identifiers, schemas, audit packs."

  N_AI_GOVERNANCE_ASSURANCE:
    title: "AI Governance & Assurance (A)"
    optin_path: "OPT-IN_FRAMEWORK/N-NEURAL_NETWORKS/A-AI_GOVERNANCE_ASSURANCE"
    ata_scope: ["ATA_AI_GOVERNANCE_ASSURANCE"]
    doa_criticality: "VARIES"
    novel_technology: false
    profile: "standard_profile"
    description: "Governance wrapper over AI/ML lifecycle — certification, ethics, human authority, explainability."

  N_PROGRAM_RESERVED:
    title: "Program Reserved (P*)"
    optin_path: "OPT-IN_FRAMEWORK/N-NEURAL_NETWORKS/PSTAR-PROGRAM_RESERVED"
    ata_scope: ["ATA_98-RESERVED_PROGRAM_SLOT"]
    doa_criticality: "VARIES"
    novel_technology: false
    profile: "standard_profile"
    description: "Expansion slot for future program-specific AI governance and neural network systems."

# =============================================================================
# Validation Rules
# =============================================================================

validation_rules:
  - id: "VAL-001"
    name: "Baseline Producer Lock"
    rule: "FBL can only be produced at LC02, DBL at LC04, PBL at LC10"
    enforcement: "block"

  - id: "VAL-002"
    name: "Safety Phase Mandatory"
    rule: "LC03 cannot be skipped for cert-eligible novel technology systems"
    enforcement: "block"

  - id: "VAL-003"
    name: "Conformity Gate Mandatory"
    rule: "LC06 cannot be skipped for cert-eligible systems"
    enforcement: "block"

  - id: "VAL-004"
    name: "Certification Trace"
    rule: "LC08 compliance claims must reference LC06 evidence"
    enforcement: "block"

  - id: "VAL-005"
    name: "Production Authority Lock"
    rule: "LC09 cannot produce PBL - only LC10 produces PBL"
    enforcement: "block"

  - id: "VAL-006"
    name: "Operational Lineage"
    rule: "LC12/LC13 must reference certified baseline lineage (LC08 → LC10)"
    enforcement: "block"

# =============================================================================
# CI Hints
# =============================================================================

ci_hints:
  yamllint:
    max_line_length: 200
    truthy: disable

  validation_script: "scripts/validate_lc_activation.py"
  schema: "lifecycle/schemas/t_subdomain_lc_activation.schema.json"

# =============================================================================
# End of T-SUBDOMAIN LC Activation
# =============================================================================
